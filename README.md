```html
javascript:(function(){const k="AIzaSyDSIy5m7mTXlMMR_OOdCu2Af_EwoCd124w",u=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${k}`;if(window.iaWin){iaWin.style.display=iaWin.style.display=="none"?"flex":"none";return}var s=document.createElement("style");s.textContent="#iaWin{position:fixed;bottom:70px;right:20px;width:280px;height:420px;background:#fff;color:#000;display:flex;flex-direction:column;z-index:9999;font-family:sans-serif;overflow:hidden}#iaHead{background:#eee;padding:6px;display:flex;justify-content:space-between;align-items:center;cursor:move}#iaBox{flex:1;overflow:auto;padding:6px;display:flex;flex-direction:column;gap:4px}#iaIn{display:flex;flex-direction:column;gap:4px;padding:4px;align-items:stretch;background:#f9f9f9}#msg{flex:1;padding:4px;border:1px solid #ccc;border-radius:12px;outline:none;font-size:13px}#send,#clip{width:28px;height:28px;border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:14px}#send{background:#000;color:#fff}#clip{background:#ddd;color:#000}.bubble{max-width:75%;padding:4px 6px;border-radius:8px;font-size:12px;word-wrap:break-word}.user{align-self:flex-end;background:#07f;color:#fff}.bot{align-self:flex-start;background:#eee;color:#000}.thumb{max-width:80px;max-height:80px}#iaTgl{position:fixed;bottom:20px;right:20px;background:#fff;color:#000;padding:4px 6px;cursor:move;z-index:9998;font-weight:bold}";document.head.appendChild(s);var tgl=document.createElement("div");tgl.id="iaTgl";tgl.textContent="IA";document.body.appendChild(tgl);var iaWin=document.createElement("div");iaWin.id="iaWin";iaWin.innerHTML='<div id=iaHead>Assistente <span id=cls style="cursor:pointer">×</span></div><div id=iaBox><div class="bubble bot">🤖 Olá!</div></div><div id=iaIn><img id=prev class=thumb style="display:none"><div style="display:flex;gap:4px"><input id=msg type=text placeholder="Mensagem..." style="flex:1"><input id=file type=file accept="image/*" style="display:none"><button id=clip>📎</button><button id=send>➤</button></div></div>';document.body.appendChild(iaWin);document.getElementById("cls").onclick=()=>iaWin.style.display="none";var minimized=false;document.addEventListener("keydown",e=>{if(e.key=="F9"){if(!minimized){iaWin.style.height="60px";iaBox.style.display="none";iaIn.style.display="none";minimized=true}else{iaWin.style.height="420px";iaBox.style.display="flex";iaIn.style.display="flex";minimized=false}}});var iaBox=document.getElementById("iaBox"),msg=document.getElementById("msg"),file=document.getElementById("file"),prev=document.getElementById("prev");function add(w,t,img){var d=document.createElement("div");d.className="bubble "+(w=="u"?"user":"bot");if(img){var im=document.createElement("img");im.src=img;im.className="thumb";d.appendChild(im)}if(t)d.appendChild(document.createTextNode(t));iaBox.appendChild(d);iaBox.scrollTop=iaBox.scrollHeight}async function sendMsg(){var txt=msg.value.trim(),f=file.files[0];if(!txt&&!f)return;add("u",txt,f?prev.src:null);msg.value="";if(f){var r=new FileReader();r.onload=()=>ask(txt,r.result);r.readAsDataURL(f);file.value="";prev.style.display="none"}else ask(txt)}async function ask(txt,b64){add("bot","...");try{var r=await fetch(u,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:txt}].concat(b64?[{inlineData:{mimeType:"image/png",data:b64.split(",")[1]}}]:[])}]})});var j=await r.json();iaBox.lastChild.remove();add("bot",j.candidates?.[0]?.content?.parts?.[0]?.text||"❌ Sem resposta")}catch(e){iaBox.lastChild.remove();add("bot","⚠️ Erro")}}document.getElementById("send").onclick=sendMsg;document.getElementById("clip").onclick=()=>file.click();msg.onkeypress=e=>{if(e.key=="Enter")sendMsg()};file.onchange=()=>{if(file.files[0]){var r=new FileReader();r.onload=()=>{prev.src=r.result;prev.style.display="block"};r.readAsDataURL(file.files[0])}};function drag(el,handle){let x=0,y=0,dx=0,dy=0;function md(e){e.preventDefault();dx=e.touches?e.touches[0].clientX:e.clientX;dy=e.touches?e.touches[0].clientY:e.clientY;document.onmouseup=document.ontouchend=mu;document.onmousemove=document.ontouchmove=mm}function mm(e){x=dx-(e.touches?e.touches[0].clientX:e.clientX);y=dy-(e.touches?e.touches[0].clientY:e.clientY);dx=e.touches?e.touches[0].clientX:e.clientX;dy=e.touches?e.touches[0].clientY:e.clientY;el.style.top=(el.offsetTop-y)+"px";el.style.left=(el.offsetLeft-x)+"px";el.style.right="auto";el.style.bottom="auto"}function mu(){document.onmouseup=document.onmousemove=document.ontouchend=document.ontouchmove=null}handle.onmousedown=handle.ontouchstart=md}drag(iaWin,document.getElementById("iaHead"));drag(tgl,tgl);})();```
